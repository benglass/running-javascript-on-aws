<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>My Awesome SPA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>
    <h1>Super Web App Name Generator!</h1>
    <form id="name-form">
        <label>
            Give us some words!
            <input type="text" id="nouns-field" />
        </label>
        <button type="submit">See Name Suggestions</button>
    </form>
    <div id="suggestions">
    </div>
</body>

<script>
    var form = document.getElementById('name-form');
    var nounsField = document.getElementById('nouns-field');
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        var wordsString = nounsField.value;

        if (!wordsString.length) {
            alert('Please enter some words!');
            return;
        }

        var words = wordsString.split(' ');
        var wordsQuery = words.join('&words=');

        //fetch(`https://gbitq0ixwl.execute-api.us-east-1.amazonaws.com/default/nameSuggestionsAPIGateway?count=10&words=${wordsQuery}`, {
        //fetch(`https://gbitq0ixwl.execute-api.us-east-1.amazonaws.com/default/name-suggestions-v2?count=10&words=${wordsQuery}`, {
        fetch(`http://localhost:8000/suggestions?count=10&words=${wordsQuery}`, {
                mode: 'cors',
                headers: {
                    Accept: 'application/json'
                }
            })
            .then(r => r.json())
            .then(d => d.suggestions)
            .then(renderSuggestions);
    });

    var suggestionsContainer = document.getElementById('suggestions');
    renderSuggestions = suggestions => {
        var html = `
            <ul>
                ${suggestions.map(suggestion =>
                    `<li>${suggestion}</li>`
                 ).join('')}
            </ul>
        `;
        suggestionsContainer.innerHTML = html;
    };
</script>

</html>
